Test Case ID,Requirement Name,Description,Preconditions,Test Steps,Expected Result,Test Type,Priority
TC-REG-001,User Registration,Valid user registration with all required fields,No user account exists with provided email,1. Navigate to signup page 2. Enter valid name (min 3 chars) 3. Enter unique email 4. Enter password (min 8 chars with uppercase/lowercase/number) 5. Select role (Manager/Analyst/Executive) 6. Click Register,User account created successfully; Verification email sent; User redirected to email verification page; Account status is unverified,Positive,High
TC-REG-002,User Registration,Registration with duplicate email address,User account already exists with provided email,1. Navigate to signup page 2. Enter name 3. Enter email that already exists 4. Enter password 5. Select role 6. Click Register,Registration fails; Error message displayed: "Email already exists"; User remains on signup page; No duplicate account created,Negative,High
TC-REG-003,User Registration,Registration with invalid email format,No user account exists,1. Navigate to signup page 2. Enter valid name 3. Enter invalid email (missing @ or domain) 4. Enter password 5. Select role 6. Click Register,Registration fails; Error message: "Invalid email format"; Form validation error highlighted on email field,Negative,High
TC-REG-004,User Registration,Registration with weak password,No user account exists,1. Navigate to signup page 2. Enter valid name 3. Enter unique email 4. Enter weak password (less than 8 chars or missing uppercase/number) 5. Select role 6. Click Register,Registration fails; Error message: "Password must be at least 8 characters with uppercase, lowercase, and number"; Password field highlighted,Negative,High
TC-REG-005,User Registration,Manager auto-creates workspace on signup,No user account exists,1. Navigate to signup page 2. Enter valid name 3. Enter unique email 4. Enter valid password 5. Select role as Manager 6. Click Register 7. Verify email,User account created; Workspace automatically created with user as owner; Workspace name defaults to "{user_name}'s Workspace"; User can access workspace after email verification,Positive,High
TC-LOGIN-001,User Login,Valid login with correct credentials,User account exists and is verified,1. Navigate to login page 2. Enter registered email 3. Enter correct password 4. Click Login,Login successful; JWT access and refresh tokens generated; User redirected to dashboard; User profile displayed with correct role and workspace info,Positive,High
TC-LOGIN-002,User Login,Login with unverified email,User account exists but email not verified,1. Navigate to login page 2. Enter email of unverified user 3. Enter correct password 4. Click Login,Login fails; Error message: "Please verify your email before logging in"; User redirected to email verification page; No tokens issued,Negative,High
TC-LOGIN-003,User Login,Login with incorrect password,User account exists and is verified,1. Navigate to login page 2. Enter registered email 3. Enter incorrect password 4. Click Login,Login fails; Error message: "Invalid email or password"; User remains on login page; No tokens issued; Failed attempt logged,Negative,High
TC-LOGIN-004,User Login,Login with non-existent email,No account with provided email,1. Navigate to login page 2. Enter non-existent email 3. Enter any password 4. Click Login,Login fails; Error message: "Invalid email or password"; User remains on login page; No tokens issued,Negative,High
TC-LOGIN-005,User Login,Login with suspended account,User account exists but is_active=False,1. Navigate to login page 2. Enter email of suspended user 3. Enter correct password 4. Click Login,Login fails; Error message: "Your account has been suspended"; User cannot access system; No tokens issued,Negative,High
TC-EMAIL-001,Email Verification,Valid email verification with correct token,User registered but not verified; Valid verification token sent,1. Receive verification email 2. Click verification link with token 3. System verifies token,Email verification successful; User is_verified set to True; User can now login; Confirmation message displayed,Positive,High
TC-EMAIL-002,Email Verification,Email verification with expired token,Verification token has expired (>24 hours),1. Receive verification email 2. Wait 24+ hours 3. Click verification link,Verification fails; Error message: "Verification link expired"; User redirected to request new verification; No verification occurs,Negative,High
TC-EMAIL-003,Email Verification,Email verification with invalid token,Verification token is malformed or tampered,1. Receive verification email 2. Modify token in URL 3. Click modified link,Verification fails; Error message: "Invalid verification link"; User redirected to signup; No verification occurs,Negative,High
TC-EMAIL-004,Email Verification,Email verification with already verified account,User account is already verified,1. User already verified 2. Click verification link again,Verification succeeds; Message: "Your account is already verified"; User can proceed; No duplicate verification,Positive,High
TC-EMAIL-005,Email Verification,Email verification updates WorkspaceMember status,Invited user verifies email,1. Invited user receives verification email 2. Click verification link 3. Email verified,Email verified; WorkspaceMember status changed from pending_acceptance to active; joined_at timestamp set; User can access workspace,Positive,High
TC-AUTH-001,Authentication & Token Management,JWT access token generation on login,User successfully authenticated,1. Login with valid credentials 2. Receive response with tokens 3. Inspect access token payload,Access token generated with: user_id, email, role, exp (15 min default); Token is valid JWT format; Token can be decoded; Token includes all required claims,Positive,High
TC-AUTH-002,Authentication & Token Management,JWT refresh token generation and usage,User successfully authenticated,1. Login and receive refresh token 2. Wait for access token to expire 3. Send refresh token to /auth/token/refresh/ endpoint 4. Receive new access token,New access token generated; Refresh token remains valid; Old access token invalidated; User can continue using system without re-login,Positive,High
TC-AUTH-003,Authentication & Token Management,API request with expired access token,Access token has expired,1. Login and get access token 2. Wait for token expiration (15 min) 3. Make API request with expired token,Request fails with 401 Unauthorized; Error message: "Token expired"; User prompted to refresh or re-login; No data returned,Negative,High
TC-AUTH-004,Authentication & Token Management,API request with invalid/tampered token,Access token is malformed or tampered,1. Login and get access token 2. Modify token payload or signature 3. Make API request with tampered token,Request fails with 401 Unauthorized; Error message: "Invalid token"; Request rejected; No data returned; Tampering detected,Negative,High
TC-AUTH-005,Authentication & Token Management,Token blacklist on logout,User has valid refresh token,1. Login and get tokens 2. Call logout endpoint with refresh token 3. Attempt to use refresh token again,Logout successful; Refresh token blacklisted; Subsequent refresh attempts fail; User must re-login; Access token expires naturally,Positive,High
TC-WS-001,Workspace Creation & Management,Workspace auto-created for Manager on signup,Manager user registered,1. Register as Manager 2. Verify email 3. Login 4. Check workspace info,Workspace created automatically; Workspace name: "{user_name}'s Workspace"; User is owner; Workspace ID assigned; Workspace accessible in dashboard,Positive,High
TC-WS-002,Workspace Creation & Management,Update workspace name and description,User is Manager and workspace exists,1. Login as Manager 2. Navigate to workspace settings 3. Enter new workspace name 4. Enter new description 5. Click Save,Workspace updated successfully; New name displayed in dashboard; Description saved; Updated timestamp recorded; Change logged in audit trail,Positive,High
TC-WS-003,Workspace Creation & Management,Non-manager cannot update workspace,User is Analyst or Executive,1. Login as Analyst/Executive 2. Attempt to access workspace settings 3. Try to update workspace info,Access denied; Error message: "Only workspace owner can update workspace"; User redirected to dashboard; No changes made,Negative,High
TC-WS-004,Workspace Creation & Management,Workspace isolation - users see only their workspace,Multiple workspaces exist in system,1. Login as Manager A 2. Check workspace list 3. Logout 4. Login as Manager B 5. Check workspace list,Manager A sees only their workspace; Manager B sees only their workspace; No cross-workspace data visible; Workspace isolation enforced,Positive,High
TC-WS-005,Workspace Creation & Management,Unverified user cannot access workspace,User account exists but email not verified,1. Register as Manager 2. Do not verify email 3. Login 4. Attempt to access workspace,Access denied; Error message: "Please verify your email before accessing workspace features"; User redirected to email verification; Workspace remains inaccessible,Negative,High
TC-INV-001,User Invitation & Role Assignment,Manager invites new user with Analyst role,Manager is verified and workspace exists,1. Login as Manager 2. Navigate to Members 3. Click "Invite Member" 4. Enter new user email 5. Select role: Analyst 6. Click Send Invitation,Invitation email sent; Invitation record created with status=pending; WorkspaceMember entry created with status=pending_registration; Invitation expires in 48 hours; Invitee receives email with acceptance link,Positive,High
TC-INV-002,User Invitation & Role Assignment,Manager invites existing user with Executive role,Manager is verified; Invitee has existing account,1. Login as Manager 2. Navigate to Members 3. Click "Invite Member" 4. Enter existing user email 5. Select role: Executive 6. Click Send Invitation,Invitation email sent; WorkspaceMember status=pending_acceptance; Existing user notified; User can accept invitation after login; Role set to Executive,Positive,High
TC-INV-003,User Invitation & Role Assignment,Cannot invite duplicate pending invitation,Pending invitation already exists for email,1. Login as Manager 2. Invite user@example.com as Analyst 3. Attempt to invite user@example.com again as Executive,Invitation fails; Error message: "Pending invitation already exists for this email"; User must cancel previous invitation first; No duplicate created,Negative,High
TC-INV-004,User Invitation & Role Assignment,Unverified Manager cannot send invitations,Manager account exists but email not verified,1. Register as Manager 2. Do not verify email 3. Login 4. Navigate to Members 5. Attempt to send invitation,Access denied; Error message: "Please verify your email before accessing workspace features"; Invitation not sent; User redirected,Negative,High
TC-INV-005,User Invitation & Role Assignment,Manager can re-invite after removing member,Member was previously removed from workspace,1. Login as Manager 2. Remove member from workspace 3. Invite same email again with different role,Invitation succeeds; New invitation created; Old invitations marked as expired; WorkspaceMember entry recreated; User can accept new invitation,Positive,High
TC-ACCEPT-001,Accept Workspace Invitation,Existing user accepts invitation,User has existing account; Valid invitation token received,1. Receive invitation email 2. Click acceptance link with token 3. System validates token 4. User logs in,Invitation accepted; WorkspaceMember status changed to active; User added to workspace; Role assigned; User can access workspace after login,Positive,High
TC-ACCEPT-002,Accept Workspace Invitation,New user accepts invitation and registers,User does not have account; Valid invitation token received,1. Receive invitation email 2. Click acceptance link with token 3. System redirects to signup 4. User registers with provided email and role,Invitation accepted; User account created; WorkspaceMember created with status=active; User can access workspace; Email and role pre-filled from invitation,Positive,High
TC-ACCEPT-003,Accept Workspace Invitation,Invitation acceptance with expired token,Invitation token has expired (>48 hours),1. Receive invitation email 2. Wait 48+ hours 3. Click acceptance link,Acceptance fails; Error message: "Invitation link expired"; User redirected to request new invitation; No workspace access granted,Negative,High
TC-ACCEPT-004,Accept Workspace Invitation,Invitation acceptance with invalid token,Invitation token is malformed or tampered,1. Receive invitation email 2. Modify token in URL 3. Click modified link,Acceptance fails; Error message: "Invalid invitation link"; User redirected; No workspace access granted,Negative,High
TC-ACCEPT-005,Accept Workspace Invitation,Cannot accept already accepted invitation,Invitation status is already accepted,1. Accept invitation 2. Attempt to accept same invitation again,Acceptance fails; Error message: "Invitation already accepted"; User remains in workspace; No duplicate membership created,Negative,High
TC-PERM-001,Permission & Authorization Control,Manager can view all workspace members,Manager is verified and workspace has members,1. Login as Manager 2. Navigate to Members page 3. View member list,All members displayed: accepted, pending, invited; Manager sees all statuses; Member details include: name, email, role, status; List is complete and accurate,Positive,High
TC-PERM-002,Permission & Authorization Control,Analyst can only view active members,Analyst is verified member of workspace,1. Login as Analyst 2. Navigate to Members page 3. View member list,Only active members displayed; Pending and invited members hidden; Cannot see member management options; Read-only access to member list,Positive,High
TC-PERM-003,Permission & Authorization Control,Manager can assign roles to members,Manager is verified; Member exists in workspace,1. Login as Manager 2. Navigate to Members 3. Select member 4. Click "Change Role" 5. Select new role (Analyst/Executive) 6. Click Save,Role updated successfully; Member's role changed in User model and WorkspaceMember; Change reflected immediately; Audit log recorded; Member notified of role change,Positive,High
TC-PERM-004,Permission & Authorization Control,Analyst cannot assign roles,User is Analyst,1. Login as Analyst 2. Navigate to Members 3. Attempt to change another member's role,Access denied; Role change button disabled or hidden; Error message: "Only managers can assign roles"; No role changes possible,Negative,High
TC-PERM-005,Permission & Authorization Control,Manager cannot demote self,Manager is only manager in workspace,1. Login as Manager 2. Navigate to Members 3. Select own profile 4. Attempt to change own role to Analyst,Role change fails; Error message: "Cannot change your own role"; Manager role remains unchanged; Workspace must have at least one manager,Negative,High
TC-DELETE-001,Delete User from Workspace,Manager removes member from workspace,Manager is verified; Member exists in workspace,1. Login as Manager 2. Navigate to Members 3. Select member 4. Click "Remove" 5. Confirm deletion,Member removed successfully; WorkspaceMember entry deleted; User no longer has workspace access; Removal logged; User can be re-invited,Positive,High
TC-DELETE-002,Delete User from Workspace,Manager cannot remove self,Manager is the only manager in workspace,1. Login as Manager 2. Navigate to Members 3. Select own profile 4. Click "Remove",Removal fails; Error message: "You cannot remove yourself from the workspace"; Manager remains in workspace; Workspace must have at least one manager,Negative,High
TC-DELETE-003,Delete User from Workspace,Analyst cannot remove members,User is Analyst,1. Login as Analyst 2. Navigate to Members 3. Attempt to remove another member,Access denied; Remove button disabled or hidden; Error message: "Only managers can remove members"; No removal occurs,Negative,High
TC-DELETE-004,Delete User from Workspace,Removed member loses workspace access,Member was removed from workspace,1. Manager removes member 2. Removed user attempts to access workspace 3. Removed user attempts to view reports,Access denied; Error message: "You are not a member of this workspace"; User cannot see workspace data; User can be re-invited,Negative,High
TC-DELETE-005,Delete User from Workspace,Pending invitation removed,Pending invitation exists for email,1. Login as Manager 2. Navigate to Members 3. Find pending invitation 4. Click "Remove Invitation",Invitation removed; WorkspaceMember entry deleted; Invitee no longer has pending status; Can send new invitation; Old invitation marked as expired,Positive,High
TC-SUSPEND-001,Suspend & Unsuspend Member,Manager suspends active member,Manager is verified; Member is active,1. Login as Manager 2. Navigate to Members 3. Select member 4. Click "Suspend",Member suspended; is_active set to False; Member cannot login; Member cannot access workspace; Status shows "suspended",Positive,High
TC-SUSPEND-002,Suspend & Unsuspend Member,Suspended member cannot login,Member is suspended (is_active=False),1. Attempt to login with suspended member credentials 2. Enter correct password 3. Click Login,Login fails; Error message: "Your account has been suspended"; No tokens issued; Member cannot access system,Negative,High
TC-SUSPEND-003,Suspend & Unsuspend Member,Manager unsuspends suspended member,Member is suspended,1. Login as Manager 2. Navigate to Members 3. Select suspended member 4. Click "Unsuspend",Member unsuspended; is_active set to True; Member can login again; Member can access workspace; Status shows "active",Positive,High
TC-SUSPEND-004,Suspend & Unsuspend Member,Analyst cannot suspend members,User is Analyst,1. Login as Analyst 2. Navigate to Members 3. Attempt to suspend another member,Access denied; Suspend button disabled or hidden; Error message: "Only managers can suspend members"; No suspension occurs,Negative,High
TC-SUSPEND-005,Suspend & Unsuspend Member,Manager cannot suspend self,Manager is the only manager in workspace,1. Login as Manager 2. Navigate to Members 3. Select own profile 4. Click "Suspend",Suspension fails; Error message: "You cannot suspend yourself"; Manager remains active; Workspace must have at least one active manager,Negative,High
TC-FILE-001,File Upload (ETL Connector),Valid CSV file upload,User is verified Manager; CSV file is valid,1. Login as Manager 2. Navigate to Data Upload 3. Select valid CSV file (< 100MB) 4. Enter source name 5. Click Upload,File uploaded successfully; Upload progress shown; File stored in /media/workspaces/{workspace_id}/uploads/; Connector service receives file; Status: "uploaded"; File ID returned,Positive,High
TC-FILE-002,File Upload (ETL Connector),CSV file upload with invalid format,User is verified Manager; CSV file is malformed,1. Login as Manager 2. Navigate to Data Upload 3. Select malformed CSV (missing headers/invalid delimiters) 4. Click Upload,Upload fails; Error message: "Invalid CSV format"; Detector service rejects file; No data ingested; User prompted to fix file,Negative,High
TC-FILE-003,File Upload (ETL Connector),File upload exceeds size limit,User is verified Manager; File size > 100MB,1. Login as Manager 2. Navigate to Data Upload 3. Select large file (> 100MB) 4. Click Upload,Upload fails; Error message: "File size exceeds 100MB limit"; File rejected; User prompted to split file; No partial upload occurs,Negative,High
TC-FILE-004,File Upload (ETL Connector),Duplicate file upload with same source name,User is verified Manager; File with same source_name exists,1. Login as Manager 2. Navigate to Data Upload 3. Upload CSV with source_name="sales_data" 4. Upload another CSV with same source_name,Second upload succeeds; New version created; Previous version archived; Metadata updated; Both versions accessible in history,Positive,High
TC-FILE-005,File Upload (ETL Connector),Unverified user cannot upload files,User is Manager but email not verified,1. Register as Manager 2. Do not verify email 3. Login 4. Navigate to Data Upload 5. Attempt to upload file,Upload blocked; Error message: "Please verify your email before uploading data"; File upload disabled; User redirected to verification,Negative,High
TC-ETL-001,ETL Pipeline Execution,Complete ETL pipeline execution with valid data,Valid CSV uploaded; All services running,1. Upload valid CSV file 2. Monitor pipeline status 3. Verify each stage: Connector → Detector → Extractor → Transformer → Loader 4. Check ClickHouse for data,Pipeline executes successfully; All stages complete; Data loaded into ClickHouse; Status: "completed"; Execution time logged; No errors,Positive,High
TC-ETL-002,ETL Pipeline Execution,ETL pipeline fails at Detector stage,CSV file has unrecognizable schema,1. Upload CSV with invalid/unknown schema 2. Monitor pipeline 3. Check Detector service logs,Pipeline fails at Detector; Error message: "Schema detection failed"; Status: "failed"; Error details logged; User notified; Data not loaded,Negative,High
TC-ETL-003,ETL Pipeline Execution,ETL pipeline fails at Transformer stage,Data transformation rules fail,1. Upload CSV with data that fails transformation 2. Monitor pipeline 3. Check Transformer service logs,Pipeline fails at Transformer; Error message: "Data transformation failed"; Status: "failed"; Specific transformation error logged; Data not loaded; User can retry,Negative,High
TC-ETL-004,ETL Pipeline Execution,ETL pipeline fails at Loader stage,ClickHouse connection unavailable,1. Upload valid CSV 2. Stop ClickHouse service 3. Monitor pipeline 4. Check Loader service logs,Pipeline fails at Loader; Error message: "ClickHouse connection failed"; Status: "failed"; Retry mechanism triggered; Data queued for retry; User notified,Negative,High
TC-ETL-005,ETL Pipeline Execution,ETL pipeline with large dataset (10M+ rows),Valid CSV with 10M+ rows uploaded,1. Upload large CSV file 2. Monitor pipeline execution 3. Check memory usage 4. Verify data in ClickHouse,Pipeline completes successfully; All rows loaded; Execution time logged (expected: 5-15 min); No memory leaks; Data integrity verified,Positive,High
TC-VAL-001,Data Validation & Transformation,Schema detection for CSV with standard columns,Valid CSV with headers: id, name, email, date,1. Upload CSV 2. Detector service analyzes schema 3. Verify detected schema,Schema correctly detected; Column names identified; Data types inferred: id=Integer, name=String, email=String, date=Date; Confidence score > 95%; Schema stored in metadata,Positive,High
TC-VAL-002,Data Validation & Transformation,Data type validation - numeric column with non-numeric values,CSV has numeric column with text values,1. Upload CSV with mixed data types 2. Transformer validates data 3. Check validation results,Validation fails for non-numeric rows; Error message: "Invalid data type in column X"; Rows flagged for review; User can choose: skip/transform/reject,Negative,High
TC-VAL-003,Data Validation & Transformation,Data transformation - date format standardization,CSV has dates in multiple formats (MM/DD/YYYY, DD-MM-YYYY),1. Upload CSV with mixed date formats 2. Transformer applies standardization 3. Verify output,All dates standardized to ISO 8601 (YYYY-MM-DD); Transformation successful; No data loss; Transformation rules logged; Audit trail recorded,Positive,High
TC-VAL-004,Data Validation & Transformation,Data validation - null/missing value handling,CSV has missing values in required columns,1. Upload CSV with null values 2. Validator checks required fields 3. Check validation report,Missing values detected; Rows flagged; User options: skip rows/fill with default/reject; Validation report generated; Data quality score calculated,Positive,High
TC-VAL-005,Data Validation & Transformation,Data transformation - duplicate row removal,CSV has duplicate rows,1. Upload CSV with duplicate rows 2. Transformer deduplicates 3. Verify output,Duplicates identified and removed; Original row count vs. final row count logged; Deduplication rules applied; Data integrity maintained; Audit trail recorded,Positive,High
TC-LOAD-001,Data Loading & Storage (ClickHouse / DB),Data successfully loaded into ClickHouse table,Transformed data ready; ClickHouse running,1. Complete ETL pipeline 2. Loader service connects to ClickHouse 3. Create table if not exists 4. Insert data 5. Verify in ClickHouse,Data loaded successfully; Table created with correct schema; All rows inserted; Row count matches; Query execution fast (< 1 sec); Data persisted,Positive,High
TC-LOAD-002,Data Loading & Storage (ClickHouse / DB),ClickHouse connection failure during load,ClickHouse service unavailable,1. Start ETL pipeline 2. Stop ClickHouse service during Loader stage 3. Monitor error handling,Load fails gracefully; Error message: "ClickHouse connection failed"; Data queued for retry; Retry mechanism activated; No data loss; User notified,Negative,High
TC-LOAD-003,Data Loading & Storage (ClickHouse / DB),Data query performance after load,Large dataset (1M+ rows) loaded into ClickHouse,1. Load data into ClickHouse 2. Execute query: SELECT COUNT(*) FROM table 3. Execute aggregation query 4. Measure execution time,Query returns correct count; Aggregation query completes in < 1 sec; Query performance acceptable; Indexes used; No timeouts,Positive,High
TC-LOAD-004,Data Loading & Storage (ClickHouse / DB),Incremental data load (append mode),Data already exists in ClickHouse; New data to append,1. Load initial dataset 2. Upload new CSV with additional rows 3. Loader appends data 4. Verify total row count,New data appended successfully; Total row count = initial + new; No duplicates created; Data integrity maintained; Timestamps updated,Positive,High
TC-LOAD-005,Data Loading & Storage (ClickHouse / DB),Data load with schema mismatch,New data has different schema than existing table,1. Load initial dataset with schema A 2. Upload new CSV with schema B 3. Attempt to load,Load fails; Error message: "Schema mismatch"; Loader rejects incompatible data; User prompted to: migrate schema/reject data; No partial load occurs,Negative,High
TC-ERR-001,Error Handling & Logging,System logs all errors with context,Error occurs during ETL pipeline,1. Trigger error (e.g., invalid CSV) 2. Check application logs 3. Verify error details,Error logged with: timestamp, service name, error type, stack trace, user_id, workspace_id; Log level appropriate (ERROR/WARNING); Searchable in log aggregation system,Positive,High
TC-ERR-002,Error Handling & Logging,User receives meaningful error messages,Invalid data uploaded,1. Upload invalid CSV 2. Monitor error response 3. Check error message clarity,Error message is user-friendly; Specific issue identified; Actionable guidance provided; Technical details not exposed; Message logged separately,Positive,High
TC-ERR-003,Error Handling & Logging,System handles concurrent requests without data corruption,Multiple users upload files simultaneously,1. User A uploads CSV 2. User B uploads CSV (same time) 3. User C uploads CSV (same time) 4. Verify all data loaded correctly,All uploads processed successfully; No data corruption; No race conditions; Each user's data isolated; Workspace isolation maintained; All files loaded correctly,Positive,High
TC-ERR-004,Error Handling & Logging,Graceful degradation when service unavailable,One microservice (e.g., Transformer) is down,1. Stop Transformer service 2. Upload CSV 3. Monitor pipeline 4. Check error handling,Pipeline fails gracefully at Transformer; Error message: "Service temporarily unavailable"; Retry mechanism activated; User notified; System remains stable; No cascading failures,Positive,High
TC-ERR-005,Error Handling & Logging,Audit trail for all user actions,User performs multiple actions (login, upload, query),1. Login 2. Upload file 3. Execute query 4. Check audit logs,All actions logged: timestamp, user_id, action_type, resource_id, result; Audit trail immutable; Searchable by user/date/action; Compliance-ready; No sensitive data in logs,Positive,High
TC-VOICE-001,Voice Report Upload & Transcription,Valid audio file upload and transcription,User is verified Manager; Valid audio file provided,1. Login as Manager 2. Navigate to Voice Upload 3. Select valid audio file (MP3/M4A/WAV) 4. Click Upload 5. Monitor transcription progress,Audio file uploaded successfully; Small Whisper service processes audio; Transcription completed; Transcribed text displayed; Report ID returned; Status: "transcribed",Positive,High
TC-VOICE-002,Voice Report Upload & Transcription,Audio file upload with unsupported format,User is verified Manager; Audio file is unsupported format,1. Login as Manager 2. Navigate to Voice Upload 3. Select unsupported audio file (e.g., .exe) 4. Click Upload,Upload fails; Error message: "Unsupported file format"; Accepted formats listed; File rejected; No processing attempted,Negative,High
TC-VOICE-003,Voice Report Upload & Transcription,Audio file exceeds size limit,User is verified Manager; Audio file > 50MB,1. Login as Manager 2. Navigate to Voice Upload 3. Select large audio file (> 50MB) 4. Click Upload,Upload fails; Error message: "Audio file exceeds 50MB limit"; File rejected; User prompted to use shorter audio; No partial upload,Negative,High
TC-VOICE-004,Voice Report Upload & Transcription,Conversational question (no SQL required),User uploads audio asking general question,1. Login as Manager 2. Upload audio asking: "What is the company revenue?" 3. Monitor processing,Audio processed; Transcription completed; Question type: "conversational"; No SQL generated; Message returned; Report created with status: "uploaded",Positive,High
TC-VOICE-005,Voice Report Upload & Transcription,Analytical question with SQL generation,User uploads audio asking data question,1. Login as Manager 2. Upload audio asking: "Show total revenue by year" 3. Monitor processing,Audio processed; Transcription completed; Question type: "analytical"; SQL generated; Intent extracted; Report created with status: "pending_execution",Positive,High
TC-SQL-001,SQL Query Execution & Validation,Valid SQL query execution,Report has valid SQL; ClickHouse running,1. Login as Manager 2. Select report with SQL 3. Click "Execute Query" 4. Monitor execution,SQL validated successfully; Query executed on ClickHouse; Results returned; Row count displayed; Execution time logged; Status: "executed",Positive,High
TC-SQL-002,SQL Query Execution & Validation,SQL injection attempt blocked,User attempts SQL injection in query,1. Login as Analyst 2. Edit SQL with injection payload: "'; DROP TABLE users; --" 3. Click "Execute Query",SQL validation fails; Error message: "SQL injection detected"; Query rejected; No execution; Data protected; Attempt logged,Security,High
TC-SQL-003,SQL Query Execution & Validation,Query with invalid syntax,Report has malformed SQL,1. Login as Manager 2. Select report 3. Edit SQL with syntax error 4. Click "Execute Query",SQL validation fails; Error message: "Invalid SQL syntax"; Specific error location provided; Query not executed; User can edit and retry,Negative,High
TC-SQL-004,SQL Query Execution & Validation,Query accessing unauthorized table,User attempts to query table outside workspace,1. Login as Analyst 2. Edit SQL to query different workspace table 3. Click "Execute Query",Query blocked; Error message: "Access denied to table"; Workspace isolation enforced; Query not executed; Attempt logged,Security,High
TC-SQL-005,SQL Query Execution & Validation,Query timeout handling,Query takes longer than timeout threshold,1. Login as Manager 2. Execute complex query on large dataset 3. Monitor execution 4. Wait for timeout,Query execution stops after timeout (default: 30 sec); Error message: "Query timeout"; User can modify query or increase timeout; No system hang,Negative,High
TC-EDIT-001,SQL Editing & History,Analyst edits generated SQL,Report has generated SQL; Analyst is verified,1. Login as Analyst 2. Select report 3. Click "Edit SQL" 4. Modify SQL query 5. Click "Save",SQL updated successfully; New SQL saved to final_sql; sql_edited flag set to True; edited_by recorded; Status: "pending_execution"; History entry created,Positive,High
TC-EDIT-002,SQL Editing & History,Manager cannot edit SQL,User is Manager,1. Login as Manager 2. Select report 3. Attempt to click "Edit SQL" button,Edit button disabled or hidden; Error message: "Only analysts can edit SQL"; No edit interface shown; SQL remains unchanged,Negative,High
TC-EDIT-003,SQL Editing & History,SQL edit validation,Analyst edits SQL with invalid syntax,1. Login as Analyst 2. Select report 3. Click "Edit SQL" 4. Enter invalid SQL 5. Click "Save",SQL validation fails; Error message: "Invalid SQL syntax"; Edit rejected; Original SQL preserved; User can retry,Negative,High
TC-EDIT-004,SQL Editing & History,View SQL edit history,Report has multiple SQL edits,1. Login as Manager 2. Select report 3. Click "View History" 4. Check SQL edit history,All edits displayed with: timestamp, edited_by, old_sql, new_sql; Edits in chronological order; Can compare versions; Audit trail complete,Positive,High
TC-EDIT-005,SQL Editing & History,Revert to previous SQL version,Report has multiple SQL versions,1. Login as Analyst 2. Select report 3. Click "View History" 4. Select previous version 5. Click "Revert",Previous SQL restored; final_sql updated; New history entry created; Status: "pending_execution"; Revert logged,Positive,High
TC-REPORT-001,Report Management & Visualization,List all reports in workspace,User is verified member; Reports exist,1. Login as Manager/Analyst 2. Navigate to Reports 3. View report list,All workspace reports displayed; Sorted by created_at (newest first); Shows: title, status, created_by, created_at; Pagination if > 20 reports; Can filter by status,Positive,High
TC-REPORT-002,Report Management & Visualization,View detailed report information,Report exists and is accessible,1. Login as Manager 2. Select report 3. Click "View Details",Report details displayed: transcription, SQL, results, chart, execution time; Query result table shown; Chart visualization rendered; Metadata displayed,Positive,High
TC-REPORT-003,Report Management & Visualization,Delete report (Manager only),Report exists; User is Manager,1. Login as Manager 2. Select own report 3. Click "Delete" 4. Confirm deletion,Report deleted successfully; Removed from list; Metabase question deleted; Embed URL invalidated; Deletion logged; Cannot recover,Positive,High
TC-REPORT-004,Report Management & Visualization,Manager cannot delete other's report,Report created by different Manager,1. Login as Manager A 2. Attempt to delete report created by Manager B,Delete button disabled; Error message: "Can only delete own reports"; Report remains; Access denied,Negative,High
TC-REPORT-005,Report Management & Visualization,Chart type inference and visualization,Report executed with results,1. Login as Manager 2. Execute report 3. Check inferred chart type 4. View visualization,Chart type inferred correctly: line (time series), bar (categories), pie (proportions), table (complex); Visualization rendered; Can switch chart types; Metabase embed URL generated,Positive,High
TC-PROFILE-001,User Profile Management,View own user profile,User is authenticated,1. Login 2. Navigate to Profile 3. View profile information,Profile displayed: name, email, role, is_verified, created_at; All information accurate; Read-only fields protected; Can edit name and email,Positive,High
TC-PROFILE-002,User Profile Management,Update user name,User is authenticated,1. Login 2. Navigate to Profile 3. Click "Edit Name" 4. Enter new name 5. Click "Save",Name updated successfully; Profile refreshed; Change reflected in dashboard; Audit log recorded; Email verification not required,Positive,High
TC-PROFILE-003,User Profile Management,Update user email,User is authenticated,1. Login 2. Navigate to Profile 3. Click "Edit Email" 4. Enter new email 5. Click "Save",Email updated; is_verified set to False; Verification email sent to new email; User must verify new email; Old email no longer works,Positive,High
TC-PROFILE-004,User Profile Management,Cannot update email to existing email,Another user has target email,1. Login as User A 2. Navigate to Profile 3. Attempt to change email to User B's email,Email update fails; Error message: "Email already in use"; Profile unchanged; User remains on profile page,Negative,High
TC-PROFILE-005,User Profile Management,View workspace information in profile,User is Manager or Analyst,1. Login 2. Navigate to Profile 3. Check workspace section,Workspace info displayed: workspace_id, workspace_name; Manager sees owned workspace; Analyst/Executive see joined workspaces; Can navigate to workspace,Positive,High
TC-DEACT-001,Account Deactivation,Deactivate account successfully,User is authenticated and verified,1. Login 2. Navigate to Account Settings 3. Click "Deactivate Account" 4. Confirm deactivation 5. Provide refresh token,Account deactivated; is_active set to False; Refresh token blacklisted; User logged out; Cannot login again; Deactivation logged,Positive,High
TC-DEACT-002,Account Deactivation,Cannot login after deactivation,Account is deactivated,1. Attempt to login with deactivated account email 2. Enter correct password 3. Click Login,Login fails; Error message: "Your account has been suspended"; No tokens issued; User cannot access system,Negative,High
TC-DEACT-003,Account Deactivation,Deactivation without refresh token,User attempts deactivation without token,1. Login 2. Navigate to Account Settings 3. Click "Deactivate Account" 4. Do not provide refresh token 5. Click Confirm,Deactivation fails; Error message: "Refresh token required"; Account remains active; User can retry,Negative,High
TC-DEACT-004,Account Deactivation,Workspace data preserved after deactivation,Manager deactivates account,1. Login as Manager 2. Create workspace and reports 3. Deactivate account 4. Admin checks workspace,Workspace preserved; Reports preserved; Data not deleted; Workspace owner field unchanged; Data accessible to other members,Positive,High
TC-DEACT-005,Account Deactivation,Reactivation not possible via API,Account is deactivated,1. Attempt to call reactivation endpoint 2. Provide deactivated user credentials,Reactivation fails; Error message: "Reactivation not supported"; Account remains deactivated; Admin intervention required,Negative,High
